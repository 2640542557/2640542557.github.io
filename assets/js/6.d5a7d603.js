(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{331:function(a,s,t){"use strict";t.r(s);var e=t(7),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("参考官方文档\n"),s("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://docs.docker.com/engine/install/centos/"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("Docker教程\n"),s("a",{attrs:{href:"https://www.runoob.com/docker/docker-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.runoob.com/docker/docker-tutorial.html"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"_1、卸载旧版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、卸载旧版本"}},[a._v("#")]),a._v(" 1、卸载旧版本")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum remove "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-client "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-client-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-common "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-latest-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n           docker-engine\n")])])]),s("h2",{attrs:{id:"_2、需要的安装包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、需要的安装包"}},[a._v("#")]),a._v(" 2、需要的安装包")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" yum-utils\n")])])]),s("h2",{attrs:{id:"_3、设置镜像的仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、设置镜像的仓库"}},[a._v("#")]),a._v(" 3、设置镜像的仓库")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用阿里国内源安装docker，官方的太慢")]),a._v("\nyum-config-manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --add-repo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新yum软件包索引（centos7）")]),a._v("\nyum makecache fast \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新yum软件包索引（centos8没有fast命令，去掉即可）")]),a._v("\nyum makecache\n\n")])])]),s("h2",{attrs:{id:"_4、自定义配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、自定义配置"}},[a._v("#")]),a._v(" 4、自定义配置")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 下载自定义配置相关")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" /etc/docker/ https://gitee.com/hc535721622/myimage/raw/be6d4eabd6d4ac86e873e1be252440963ac27370/docker/daemon.json\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看配置文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@ecs ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat /etc/docker/daemon.json")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"registry-mirrors"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://92u4ljs3.mirror.aliyuncs.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"data-root"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/data/docker"')]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"log-driver"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"json-file"')]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"log-opts"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"max-size"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"500m"')]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"max-file"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("daemon.json配置文件说明")]),a._v(" "),s("ul",[s("li",[a._v("registry-mirrors：镜像加速")]),a._v(" "),s("li",[a._v("data-root：Docker运行时使用的根路径，默认/var/lib/docker")]),a._v(" "),s("li",[a._v("log-driver：容器日志的默认驱动程序（默认为“ json-file”）")]),a._v(" "),s("li",[a._v("log-opts：容器默认日志驱动程序选项，目的是限制日志文件个数及日志文件大小，避免出现日志无限增大导致磁盘满了的问题。")])]),a._v(" "),s("h2",{attrs:{id:"_5、安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、安装docker"}},[a._v("#")]),a._v(" 5、安装docker")]),a._v(" "),s("p",[a._v("因为centos8默认使用podman代替docker，直接安装docker会产生冲突，因此：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 先移除podman")]),a._v("\n$ yum erase "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("podman")]),a._v(" buildah\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装docker")]),a._v("\n$ yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce docker-ce-cli containerd.io "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),s("h2",{attrs:{id:"_6、启动docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、启动docker"}},[a._v("#")]),a._v(" 6、启动docker")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置开机自动启动")]),a._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("  \n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 加载重启docker")]),a._v("\nsystemctl daemon-reload\nsystemctl restart "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])])]),s("h2",{attrs:{id:"_7、查看是否成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、查看是否成功"}},[a._v("#")]),a._v(" 7、查看是否成功")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker info\n")])])]),s("ul",[s("li",[a._v("显示如下信息，就表示安装成功了。")])]),a._v(" "),s("p",[s("img",{attrs:{src:"http://192.168.3.29:6071/static/image/53ed59588fab46f281c1f20b9a2c5869.png",alt:"image.png"}})]),a._v(" "),s("h2",{attrs:{id:"_8、其他说明-安装特定版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8、其他说明-安装特定版本"}},[a._v("#")]),a._v(" 8、其他说明：安装特定版本")]),a._v(" "),s("p",[a._v("参考链接："),s("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://docs.docker.com/engine/install/centos/"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 要安装特定版本，请首先列出存储库中的可用版本：")]),a._v("\nyum list docker-ce "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--showduplicates")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v("\n")])])]),s("p",[s("img",{attrs:{src:"http://192.168.3.29:6071/static/image/199cf0620fed4ae48a5b66cb02fbdfa5.png",alt:"图片.png"}})]),a._v(" "),s("p",[a._v("返回的列表取决于启用的存储库，并且是特定的 到你的 CentOS 版本（在本例中由后缀指示）。.el7\n通过其完全限定的软件包名称安装特定版本，即 包名称 （） 加上版本字符串（第 2 列） 从第一个冒号 （） 开始，直到第一个连字符，分隔为 连字符 （）。例如。docker-ce:-docker-ce-23.0.1\n替换为所需的版本，然后运行以下命令进行安装：<VERSION_STRING>")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce-"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("VERSION_STRING"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" docker-ce-cli-"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("VERSION_STRING"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" containerd.io docker-buildx-plugin docker-compose-plugin\n")])])]),s("blockquote",[s("p",[a._v("2023-02-23最新版本：23.0.1")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce-23.0.1 docker-ce-cli-23.0.1 containerd.io docker-buildx-plugin docker-compose-plugin "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);